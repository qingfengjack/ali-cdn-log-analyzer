# 简单介绍下，为什么会有这个工具呢？  风和日丽的某个下午，我开心的在摸鱼 突然收到一个艾特 让我找一下5月份的CDN日志，我们没有保存日志  5月份日志都是离线日志了，那么怎么快速的查呢？
    于是就有了下面的一堆东西，讲实话   这玩意  很简陋，但是呢 用起来方便很多，毕竟现成的都是好用的，本来是shell写的也实现了，就想着用golang写一个，大家可以尝试用一用，有问题可以提issue或者直接输入下面一条指令+V指导你。```  echo -n  "bXVtdWJ1a3U2NjY2" | base64 -d  ```
## 目录
1. [配置阿里云凭证](#配置阿里云凭证)
2. [使用方式](#使用方式)
    - [基本查询](#基本查询)
    - [指定域名](#指定域名)
    - [使用别名](#使用别名)
3. [介绍](#介绍)
    - [功能特点](#功能特点)

## 配置阿里云凭证

创建 `~/.alibabacloud/credentials` 文件（Linux/Mac）或设置环境变量：

```ini
[default]
type = access_key
access_key_id = <your-access-key-id>
access_key_secret = <your-access-key-secret>
```

## 使用方式
### build
```bash 
go build -o cdn-log-analyzer main.go
```
### 基本查询

```bash
./cdn-log-analyzer --start="2025-05-15T00:00:00Z" --end="2025-05-16T00:00:00Z" --ip="ip"
```

### 指定域名

```bash
./cdn-log-analyzer --domain="your-cdn-domain.com" --start="2025-05-15T00:00:00Z" --end="2025-05-16T00:00:00Z" --ip="ip"
```

### 使用别名

```bash
./cdn-log-analyzer -s "2025-05-15T00:00:00Z" -e "2025-05-16T00:00:00Z" -i "ip"
```

## 介绍

### 功能特点

- **一体化工作流**：
  - 自动查询日志下载链接
  - 并行下载日志文件
  - 高效搜索指定IP
  - 生成格式化的分析报告

- **高性能处理**：
  - 并行下载（默认8线程）
  - 流式日志处理（不加载到内存）
  - 自动处理gzip压缩文件
  - 支持大文件处理（10MB缓冲）

- **智能错误处理**：
  - 部分失败不影响整体任务
  - 详细的错误报告
  - 自动重试机制
  - 上下文取消支持

- **专业报告输出**：
  - 包含所有元数据（时间范围、域名、IP等）
  - 按文件分组显示结果
  - 统计匹配数量和文件数量
  - 时间戳记录

- **安全凭证管理**：
  - 支持标准阿里云凭证配置
  - 自动处理API认证
  - 安全访问日志下载链接
```